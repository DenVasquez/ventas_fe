import{C as l}from"./index-0c1afda6.js";import{b as r}from"./sale.store-8ef729cf.js";const c=l("material",{state:()=>({materiales:[],loading:!1,error:null}),actions:{async fetchMateriales(){this.loading=!0;try{this.materiales=await r.getMateriales()}catch(a){this.error=a.message}finally{this.loading=!1}},async addMaterial(a){this.loading=!0;try{const t=await r.addMaterial(a);return this.materiales.push(t),t}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async updateMaterial(a,t){this.loading=!0;try{const e=await r.updateMaterial(a,t),i=this.materiales.findIndex(s=>s.id===a);return i!==-1&&(this.materiales[i]=e),e}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async deleteMaterial(a){this.loading=!0;try{await r.deleteMaterial(a),this.materiales=this.materiales.filter(t=>t.id!==a)}catch(t){throw this.error=t.message,t}finally{this.loading=!1}}},getters:{getMaterialById:a=>t=>a.materiales.find(e=>e.id===t),criticalMaterials:a=>a.materiales.filter(t=>t.stock<t.stock_minimo*.3).sort((t,e)=>t.stock-e.stock),lowStockMaterials:a=>a.materiales.filter(t=>t.stock<t.stock_minimo&&t.stock>=t.stock_minimo*.3),materialsCount:a=>a.materiales.length}});export{c as u};
